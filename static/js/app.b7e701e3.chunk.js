(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{215:function(e,t,a){e.exports={display:"Display_display__119IV",displayArea:"Display_displayArea__3kcYB"}},377:function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__1vg0s",sidebarList:"Sidebar_sidebarList__2_zox"}},668:function(e,t,a){e.exports={toolbarTitle:"DisplayToolbarTitle_toolbarTitle__1WT8S"}},701:function(e,t,a){e.exports={layoutContainer:"Layout_layoutContainer__2zB8O",wrapper:"Layout_wrapper__19VFS",pageContainer:"Layout_pageContainer__2OkiQ"}},703:function(e){e.exports=JSON.parse('{"Hello {{name}}":"","Welcome to DHIS2!":""}')},705:function(e,t,a){"use strict";a.r(t);var n=a(704),r=a(0),s=a.n(r),o=a(380),c=a.n(o),l=a(195),i=a(239),p=a(245),u=a(320),d=a.n(u),m=a(217),h=d()({palette:{primary1Color:p.blue700,primary2Color:p.blue900,primary3Color:p.grey200,accent1Color:p.blue700,accent2Color:p.grey100,accent3Color:p.grey500,textColor:p.darkBlack,alternateTextColor:p.white,canvasColor:p.white,borderColor:p.grey300,disabledColor:Object(m.fade)(p.darkBlack,.3),pickerHeaderColor:p.blue500,clockCircleColor:Object(m.fade)(p.darkBlack,.07),shadowColor:p.fullBlack}}),y=a(200),E=a.n(y);const g="SELECT_KEY",f="TOGGLE_NAMESPACE",b="VALUE_CHANGE",v="OPEN_DIALOG",C="CLOSE_DIALOG",k="SEARCH_VALUE_CHANGE",N="SNACKBAR_EMPTY",x="FETCH_NAMESPACES_FULFILLED",T="FETCH_NAMESPACES_PENDING",O="FETCH_NAMESPACES_REJECTED",S="FETCH_KEYS_FULFILLED",j="FETCH_KEYS_PENDING",_="FETCH_KEYS_REJECTED",w="FETCH_VALUE_FULFILLED",D="FETCH_VALUE_PENDING",L="FETCH_VALUE_REJECTED",A="UPDATE_VALUE_FULFILLED",I="UPDATE_VALUE_PENDING",V="UPDATE_VALUE_REJECTED",F="CREATE_VALUE_FULFILLED",K="CREATE_VALUE_REJECTED",R="DELETE_KEY_FULFILLED",P="DELETE_NAMESPACE_FULFILLED",M="FETCH_HISTORY_FULFILLED",H="FETCH_HISTORY_PENDING",U="FETCH_HISTORY_REJECTED",J="FETCH_NAMESPACE_HISTORY_FULFILLED",B="FETCH_NAMESPACE_HISTORY_REJECTED",G="SET_IGNORE_NEXT_CONFIRM_NAVIGATION";var Y=a(332);const z="DELETED";var W=new class{constructor(){this.cache=[],this.ignoredStores=[""]}getNamespaces(){return Object(Y.getInstance)().then((e=>e.dataStore.getAll().then((e=>e.filter((e=>-1===this.ignoredStores.indexOf(e)))))))}deleteNamespace(e){return Object(Y.getInstance)().then((t=>t.dataStore.delete(e).then((t=>(this.cache[e]=[],t)))))}getKeys(e){return Object(Y.getInstance)().then((t=>t.dataStore.get(e))).then((e=>e.getKeys())).catch((e=>Promise.reject(e)))}getValue(e,t){const a=this.cache;return void 0===a[e]||void 0===a[e][t]?this.getMetaData(e,t).then((n=>{const r=n.value.length,s=JSON.parse(n.value);void 0===a[e]&&(a[e]=[]);const o={length:r,value:s};return a[e][t]=o,o})):new Promise((n=>{n(a[e][t])}))}getMetaData(e,t){return Object(Y.getInstance)().then((t=>t.dataStore.get(e,!1))).then((e=>e.getMetaData(t)))}createValue(e,t,a){return Object(Y.getInstance)().then((t=>t.dataStore.get(e))).then((e=>e.set(t,a,!0))).then((n=>{void 0===this.cache[e]&&(this.cache[e]=[]);const r={length:0,value:a};return this.cache[e][t]=r,n}))}updateValue(e,t,a){return Object(Y.getInstance)().then((t=>t.dataStore.get(e))).then((e=>e.update(t,a))).then((n=>(void 0===this.cache[e]&&(this.cache[e]=[]),this.cache[e][t]={value:a},n)))}deleteValue(e,t){return Object(Y.getInstance)().then((t=>t.dataStore.get(e))).then((e=>e.delete(t))).then((a=>(void 0!==this.cache[e]&&void 0!==this.cache[e][t]&&delete this.cache[e][t],a)))}updateNamespaceHistory(e,t,a){const n={name:e,action:a.action,date:new Date,user:a.user,value:"Key '".concat(t,"' was ").concat(a.action.toLowerCase(),".")};return this.getHistory(e).then((t=>{t.unshift(n),a.action===z?this.getKeys(e).then((n=>{n.length<1&&(t.unshift({name:e,action:z,date:new Date,user:a.user,value:"Namespace was deleted."}),delete this.cache[e]),this.updateValue("HISTORYSTORE",e,t)})).catch((e=>{console.error(e)})):this.updateValue("HISTORYSTORE",e,t)})).catch((t=>{if(404===t.httpStatusCode){const t=[{name:e,action:"CREATED",date:n.date,user:a.user,value:"Namespace was created."}];return this.createValue("HISTORYSTORE",e,t,!1).then((()=>{t.unshift(n),this.updateValue("HISTORYSTORE",e,t)}))}}))}successOnly(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(e)}buildId(e,t){return encodeURIComponent("".concat(e,":").concat(t))}}("https://debug.dhis2.org/dev/api");function q(){return{type:G,ignoreNextConfirm:!0}}function X(e,t){return{type:S,namespace:e,keys:t}}function Q(e){return{type:j,namespace:e}}function Z(e,t,a,n){return{type:V,namespace:e,key:t,value:a,error:n}}function $(e){return{type:P,namespace:e}}function ee(){return{type:H}}function te(e,t){return{type:f,namespace:e,override:t}}function ae(e,t=!1){return a=>(a(Q(e)),W.getKeys(e).then((t=>{a(X(e,t))})).then((()=>a(te(e,t)))).catch((t=>{if(404===t.status)return a($(e));if(t)throw t;return null})).catch((t=>{a(function(e,t){return{type:_,namespace:e,error:t}}(e,t))})))}function ne(e,t){return a=>(a(function(e,t){return{type:D,namespace:e,key:t}}(e,t)),W.getValue(e,t).then((n=>{a(function(e,t,a){return{type:w,namespace:e,key:t,value:a}}(e,t,n)),a(function(e,t,a){return{type:g,namespace:e,key:t,value:a}}(e,t,n.value))})).catch((n=>a(function(e,t,a){return{type:L,namespace:e,key:t,error:a}}(e,t,n)))))}function re(){return e=>(e({type:T}),W.getNamespaces().then((t=>{e(function(e){return{type:x,namespaces:e}}(t))})).catch((t=>e(function(e){return{type:O,error:e}}(t)))))}function se(e,t,a){return n=>(n(function(e,t,a){return{type:"CREATE_VALUE_PENDING",namespace:e,key:t,value:a}}(e,t,a)),W.createValue(e,t,a).then((()=>n(function(e,t,a){return{type:F,namespace:e,key:t,value:a}}(e,t,a)))))}function oe(e,t){return a=>{a(se(e,t,{})).then((()=>i.d.push("/edit/".concat(e,"/").concat(t)))).then((()=>a(ae(e,!0)))).catch((n=>a({type:K,namespace:e,key:t,value:{},error:n})))}}function ce(e,t){return a=>(a(ee()),W.getHistoryOfKey(e,t).then((n=>{a(function(e,t,a){return{type:M,namespace:e,key:t,history:a}}(e,t,n))})).catch((n=>{a(function(e,t,a){return{type:U,namespace:e,key:t,error:a}}(e,t,n))})))}function le(e){return t=>(t(ee()),W.getHistoryOfNamespace(e).then((a=>{t(function(e,t){return{type:J,namespace:e,history:t}}(e,a))})).catch((a=>{t(function(e,t){return{type:B,namespace:e,error:t}}(e,a))})))}function ie(e,t,a){return n=>(n(function(e,t,a){return{type:I,namespace:e,key:t,value:a}}(e,t,a)),W.updateValue(e,t,a).then((()=>n(function(e,t,a){return{type:A,namespace:e,key:t,value:a}}(e,t,a)))).catch((()=>n(Z(e,t,a)))))}function pe(e,t){return(a,n)=>(a(function(e,t){return{type:"DELETE_KEY_PENDING",namespace:e,key:t}}(e,t)),W.deleteValue(e,t).then((()=>a(function(e,t){return{type:R,namespace:e,key:t}}(e,t)))).then((e=>(n().display.key==t&&(a(q()),i.d.push("/")),e))).then((()=>a(function(e){return t=>(t(Q(e)),W.getKeys(e).then((a=>{if(a.length<1)return Promise.reject({status:404});t(X(e,a))})))}(e)))).catch((t=>{if(404===t.status)a($(e));else{if(t)throw t;a(te(e,!0))}})).catch((n=>{a(function(e,t,a){return{type:"DELETE_KEY_REJECTED",namespace:e,key:t,error:a}}(e,t,n))})))}var ue=a(361),de=a.n(ue),me=a(295),he=a.n(me);function ye(e,t={}){return{type:v,dialogprops:t,dialogType:e}}class Ee extends r.Component{static buildButton(e,t,a=!1){return s.a.createElement(he.a,{label:t,primary:a,onClick:e})}render(){const{title:e,cancelAction:t,cancelLabel:a,approveAction:n,approveLabel:r,contentStyle:o,defaultCloseDialog:c}=this.props,l=[];return l.push(Ee.buildButton(t||c,a||"Cancel")),n&&l.push(Ee.buildButton((()=>{Promise.resolve(n()).then((()=>c())).catch((()=>{}))}),r||"Create",!0)),s.a.createElement(de.a,{open:!0,title:e,actions:l,modal:!1,contentStyle:o||{},onRequestClose:c},this.props.children)}}var ge=Object(l.b)(null,(e=>({defaultCloseDialog(){e({type:C})}})))(Ee);function fe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class be extends r.Component{constructor(){super(),fe(this,"handleCancel",(()=>{this.setState({...this.state,confirmed:!1,show:!1,blockNext:!0})})),fe(this,"handleConfirm",(()=>{this.setState({...this.state,confirmed:!0,show:!1,blockNext:!1},(()=>this.props.router.push(this.state.nextLocation)))})),fe(this,"routerWillLeave",(e=>this.state.confirmed?(this.setState({...this.state,confirmed:!1,blockNext:!1}),!0):!(this.state.blockNext&&!this.props.ignoreNext)||(this.setState({...this.state,show:!0,blockNext:!1,nextLocation:e}),!1))),this.state={show:!1,blockNext:!1,confirmed:!1,nextLocation:null}}componentDidMount(){this.props.router.setRouteLeaveHook(this.props.route,this.routerWillLeave)}UNSAFE_componentWillReceiveProps(e){const t=e;if(this.props.ignoreNext)return this.setState({...this.state,blockNext:!1}),void this.props.setIgnoreNext(!1);t.value!==t.editedValue?this.setState({...this.state,blockNext:!0}):this.setState({...this.state,blockNext:!1,confirmed:!1})}render(){const e=ge.buildButton(this.handleCancel,"Stay",!1),t=ge.buildButton(this.handleConfirm,"Discard",!0);return s.a.createElement(de.a,{open:this.state.show,title:"Unsaved changes",actions:[e,t],modal:!0,onRequestClose:this.props.cancelNavigation},"You have unsaved changes! Are you sure you want to discard them?")}}var ve=Object(l.b)((e=>({ignoreNext:e.navigation.ignoreNextConfirm})),(e=>({setIgnoreNext(t){e(q())}})))(be),Ce=a(215),ke=a.n(Ce),Ne=a(368),xe=a.n(Ne),Te=a(633),Oe=a.n(Te);const Se={alignItems:"center",justifyContent:"center",backgroundColor:"#fff"},je={fill:"rgb(117, 117, 117)",display:"block",margin:"0 auto 0 auto",width:"100px",height:"auto"};class _e extends r.Component{render(){const{text:e}=this.props;return s.a.createElement("div",{className:"fff-display-area",style:Se},s.a.createElement("div",null,s.a.createElement(Oe.a,{style:je}),s.a.createElement("p",null,e)))}}class we extends r.Component{render(){const{text:e}=this.props;return s.a.createElement("div",{className:"fff-display-area",style:Se},s.a.createElement("div",null,s.a.createElement(xe.a,{style:je}),s.a.createElement("p",null,e)))}}class De extends r.Component{render(){return s.a.createElement(we,{text:"An error has occurred."})}}var Le=De,Ae=a(8);const Ie=({size:e="small"})=>{switch(e){case"small":return s.a.createElement(Ae.e,{small:!0});case"medium":return s.a.createElement(Ae.e,null);case"large":return s.a.createElement(Ae.e,{large:!0})}return null},Ve={alignItems:"center",justifyContent:"center"};class Fe extends r.Component{render(){return s.a.createElement(E.a,{zDepth:0,className:"fff-display-area",style:Ve},s.a.createElement(Ie,{size:"large"}))}}var Ke=Fe;function Re(){return(Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Me=e=>{class t extends r.Component{constructor(e){super(e),Pe(this,"renderLoading",(()=>s.a.createElement(Ke,null))),Pe(this,"renderError",(()=>s.a.createElement(Le,{error:this.props.errorMessage})))}render(){const{loading:t,error:a,...n}=this.props;return t?this.renderLoading():a?this.renderError():s.a.createElement(e,Re({},n,this.state))}}return Object(l.b)((e=>({loading:e.display.fetching,error:e.display.error,errorMessage:e.display.errorMessage})))(t)},He=a(634),Ue=a.n(He);const Je="SEARCH_JSON",Be="EXPAND_JSON",Ge="COLLAPSE_JSON",Ye="REDO_JSON",ze="UNDO_JSON",We="CHANGE_JSON_MODE",qe="FORMAT_JSON",Xe="COMPACT_JSON";function Qe(e){return{type:We,mode:e}}const Ze="NEW_NAMESPACE",$e="NEW_KEY",et="CONFIRM_DELETE_NAMESPACE",tt="CONFIRM_DELETE_KEY",at="ERROR_DIALOG";a(635);const nt=e=>e&&"object"===typeof e?Array.isArray(e)?e.map(nt):Object.keys(e).sort().reduce(((t,a)=>(t[a]=nt(e[a]),t)),{}):e;function rt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class st extends r.Component{constructor(e){super(e),rt(this,"changedEvent",(()=>{this.props.dataChanged(this.editor)})),rt(this,"jsonEditorIsValid",(()=>{try{return this.editor.get(),!0}catch(e){return!1}})),rt(this,"handleJsonEditor",(e=>{const{jsonSearchValue:t,collapse:a,expand:n,undo:r,redo:s,mode:o,compact:c,format:l}=e.jsonEditor;"code"!==this.editor.getMode()&&(this.editor.search(t||""),a&&this.editor.collapseAll(),n&&this.editor.expandAll(),r&&this.editor._onUndo(),s&&this.editor._onRedo()),"tree"!==this.editor.getMode()&&(c&&this.editor.compact(),l&&this.editor.format()),this.editor.getMode()!==o&&("code"===this.editor.options.mode&&(this.jsonEditorIsValid()?this.editor.setMode(o):(this.props.openErrorMessage("There seems to be an issue with your json, please fix all remaining issues and try again"),this.props.jsonChangeMode(this.editor.getMode()))),"code"!==this.editor.options.mode&&this.editor.setMode(o)),this.removeBuiltInMenu()})),this.editor=null}componentDidMount(){this.initEditor()}shouldComponentUpdate(e){const{namespace:t,selectedKey:a}=this.props;return t!==e.namespace||a!==e.selectedKey}UNSAFE_componentWillReceiveProps(e){e.jsonEditor!==this.props.jsonEditor&&this.handleJsonEditor(e)}updateValue(e){this.editor.set(nt(e))}UNSAFE_componentWillUpdate(e){this.updateValue(e.value),this.handleJsonEditor(e)}removeBuiltInMenu(){this.editor&&this.editor.frame&&this.editor.frame.contains(this.editor.menu)&&this.editor.frame.removeChild(this.editor.menu)}initEditor(){if(!this.editor&&this.editorContainer){const e={modes:["tree","view","text","form"],onChange:this.changedEvent};this.editor=new Ue.a(this.editorContainer,e),this.removeBuiltInMenu(),this.updateValue(this.props.value)}}render(){return s.a.createElement("div",{id:"jsoneditor",style:{backgroundColor:"white",height:"100%"},ref:e=>this.editorContainer=e})}}var ot=Object(l.b)((e=>({jsonEditor:e.jsonEditor})),(e=>({jsonChangeMode(t){e(Qe(t))},openErrorMessage(t){e(ye(at,{message:t}))}})))(st);class ct extends r.Component{constructor(...e){var t,a,n;super(...e),n=e=>{try{const t=e.get();this.props.valueChange(t)}catch(t){this.props.valueChange(t,!0)}},(a="handleDataChange")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const{value:e,namespace:t,selectedKey:a}=this.props;return s.a.createElement("div",{className:ke.a.displayArea},s.a.createElement(ot,{value:e,namespace:t,selectedKey:a,dataChanged:this.handleDataChange}))}}var lt=Me(ct),it=a(636),pt=a.n(it),ut=a(237),dt=a.n(ut),mt=a(302),ht=a.n(mt),yt=a(653),Et=a.n(yt),gt=a(654),ft=a.n(gt),bt=a(655),vt=a.n(bt),Ct=a(656),kt=a.n(Ct),Nt=a(657),xt=a.n(Nt),Tt=a(373),Ot=a.n(Tt),St=a(374),jt=a.n(St),_t=a(238),wt=a(259),Dt=a.n(wt);function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class At extends s.a.Component{constructor(e){super(e),this.changeEvent=this.changeEvent.bind(this),this.handleKeys=this.handleKeys.bind(this)}handleKeys(e){27===e.keyCode&&this.searchField.blur()}changeEvent(e){const t=e.target.value;this.props.changeAction(t)}render(){const{jsonLength:e}=this.props,t={disabled:!1};return e&&e>5e5&&(t.disabled=!0,t.title="Object is too big to search"),s.a.createElement(Dt.a,Lt({name:"searchbar",floatingLabelText:"Search Object",floatingLabelStyle:{top:"42px"},inputStyle:{marginTop:"13px"},onChange:this.changeEvent,style:this.props.style,onKeyUp:this.handleKeys,underlineStyle:{maxWidth:"150px"},ref:e=>{this.searchField=e}},t))}}var It=At,Vt=a(667),Ft=a.n(Vt);const Kt={button:{cursor:"default",maxWidth:"200px",textOverflow:"ellipsis"},label:{paddingLeft:0}};class Rt extends r.Component{render(){const{label:e}=this.props;return s.a.createElement(he.a,{primary:!0,style:Kt.button,labelStyle:Kt.label,label:e,labelPosition:"before",disableTouchRipple:!0,hoverColor:"rgba(0,0,0,0)"})}}var Pt=Rt,Mt=a(668),Ht=a.n(Mt);class Ut extends r.Component{renderPath(e){const t={fill:h.palette.primary1Color,padding:"0 16px 0 16px",verticalAlign:"middle"},a=e.split("/"),n=a.length-1;return s.a.createElement("span",{className:Ht.a.toolbarTitle},a.map(((e,a)=>s.a.createElement("span",{key:a},s.a.createElement(Pt,{label:e,key:a}),a===n?null:s.a.createElement(Ft.a,{style:t})))))}renderDefault(){return s.a.createElement("span",{className:Ht.a.toolbarTitle},"Value")}render(){const{path:e}=this.props;return e?this.renderPath(e):this.renderDefault()}}var Jt=Ut;const Bt={dropDownMenuIcon:{fill:"black"},dropDownMenu:{marginBottom:"6px"},searchBar:{marginBottom:"25px",maxWidth:"150px",padding:"0 16px 0 16px"}};class Gt extends s.a.Component{constructor(e){super(e),this.renderTreeEdit=this.renderTreeEdit.bind(this),this.renderCodeEdit=this.renderCodeEdit.bind(this),this.handleDropDownMenuChange=this.handleDropDownMenuChange.bind(this),this.state={debounced:null}}handleDropDownMenuChange(e,t,a){this.props.jsonChangeMode(a)}handleJsonSearch(e){if(this.state.debounced)this.state.debounced(e);else{const t=function(e,t,a){var n;return function(){var r=this,s=arguments,o=function(){n=null,a||e.apply(r,s)},c=a&&!n;clearTimeout(n),n=setTimeout(o,t),c&&e.apply(r,s)}}((e=>{console.log("asf"),this.props.jsonSearchAction(e)}),250);this.setState({...this.state,debounced:t}),t(e)}}static renderSavingSpinner(){return s.a.createElement(Ie,{style:{position:"relative"}})}renderTreeEdit(){const{path:e,saving:t}=this.props;return s.a.createElement(E.a,{style:{zIndex:5}},s.a.createElement(_t.Toolbar,null,s.a.createElement(_t.ToolbarGroup,null,s.a.createElement(dt.a,{onClick:this.props.handleSave,tooltip:"Save",disabled:t},t?Gt.renderSavingSpinner():s.a.createElement(ft.a,null)),s.a.createElement(pt.a,{value:this.props.mode,style:Bt.dropDownMenu,onChange:this.handleDropDownMenuChange,iconStyle:Bt.dropDownMenuIcon},s.a.createElement(ht.a,{value:"tree",primaryText:"Tree"}),s.a.createElement(ht.a,{value:"code",primaryText:"Code"})),s.a.createElement(dt.a,{onClick:this.props.jsonCollapse,tooltip:"Collapse"},s.a.createElement(Ot.a,null)),s.a.createElement(dt.a,{onClick:this.props.jsonExpand,tooltip:"Expand"},s.a.createElement(jt.a,null)),s.a.createElement(dt.a,{onClick:this.props.jsonUndo,tooltip:"Undo"},s.a.createElement(vt.a,null)),s.a.createElement(dt.a,{onClick:this.props.jsonRedo,tooltip:"Redo"},s.a.createElement(Et.a,null)),s.a.createElement(It,{style:Bt.searchBar,jsonLength:this.props.jsonEditor.jsonLength,changeAction:this.handleJsonSearch.bind(this)})),s.a.createElement(_t.ToolbarGroup,null,s.a.createElement(Jt,{path:e}))))}renderCodeEdit(){const{path:e}=this.props;return s.a.createElement(E.a,{style:{zIndex:5}},s.a.createElement(_t.Toolbar,null,s.a.createElement(_t.ToolbarGroup,null,s.a.createElement(dt.a,{onClick:this.props.handleSave,tooltip:"Save"},s.a.createElement(ft.a,null)),s.a.createElement(pt.a,{value:this.props.mode,style:Bt.dropDownMenu,onChange:this.handleDropDownMenuChange,iconStyle:Bt.dropDownMenuIcon},s.a.createElement(ht.a,{value:"tree",primaryText:"Tree"}),s.a.createElement(ht.a,{value:"code",primaryText:"Code"})),s.a.createElement(dt.a,{onClick:this.props.jsonFormat,tooltip:"Format"},s.a.createElement(xt.a,null)),s.a.createElement(dt.a,{onClick:this.props.jsonCompact,tooltip:"Format Compact"},s.a.createElement(kt.a,null))),s.a.createElement(_t.ToolbarGroup,null,s.a.createElement(Jt,{path:e}))))}render(){const{mode:e}=this.props;return"tree"===e?this.renderTreeEdit():this.renderCodeEdit()}}var Yt=Object(l.b)((e=>({mode:e.jsonEditor.mode,jsonEditor:e.jsonEditor,saving:e.jsonEditor.saving})),(e=>({jsonSearchAction(t){e(function(e){return{type:Je,searchValue:e}}(t))},jsonCollapse(){e({type:Ge})},jsonExpand(){e({type:Be})},jsonCompact(){e({type:Xe})},jsonFormat(){e({type:qe})},jsonUndo(){e({type:ze})},jsonRedo(){e({type:Ye})},jsonChangeMode(t){e(Qe(t))}})))(Gt);class zt extends r.Component{constructor(){super(),this.state={valueError:null}}componentDidMount(){const{getValue:e,params:{namespace:t,key:a}}=this.props;"undefined"!==typeof t&&"undefined"!==typeof a&&e(t,a)}UNSAFE_componentWillReceiveProps(e){const{fetchedNamespaces:t,params:a}=e,{fetchKeysForNamespace:n,getValue:r,params:s}=this.props;(!this.props.fetchedNamespaces&&t||!t)&&n(a.namespace,!0),s.namespace===a.namespace&&s.key===a.key||r(a.namespace,a.key)}handleSaveValue(){const{editedValue:e}=this.props,{namespace:t,key:a}=this.props.params;this.state.valueError?this.props.rejectUpdateValue(t,a,e,"Failed to update value: Not valid JSON"):e&&this.props.updateValue(t,a,e)}handleChangeValue(e,t){const{valueChange:a}=this.props,{namespace:n,key:r}=this.props.params;t?this.setState({...this.state,valueError:t}):(this.setState({...this.state,valueError:!1}),a(n,r,e))}render(){const{namespace:e,selectedKey:t}=this.props;let a="";return"undefined"!==typeof e&&(a+=e),"undefined"!==typeof t&&(a+="/".concat(t)),s.a.createElement(E.a,{zDepth:0,className:ke.a.display},s.a.createElement(ve,{route:this.props.route,router:this.props.router,value:this.props.value,editedValue:this.props.editedValue}),s.a.createElement(Yt,{path:a,handleSave:this.handleSaveValue.bind(this)}),s.a.createElement(lt,{namespace:e,selectedKey:t,value:this.props.value,valueChange:this.handleChangeValue.bind(this)}))}}var Wt=Object(i.e)(Object(l.b)((e=>({value:e.display.value,selectedKey:e.display.key,namespace:e.display.namespace,editedValue:e.display.editedValue,fetchedNamespaces:e.sidebar.fetched})),(e=>({getValue(t,a){e(ne(t,a))},fetchKeysForNamespace(t,a){e(ae(t,a))},updateValue(t,a,n){e(ie(t,a,n))},valueChange(t,a,n){e(function(e,t,a){return{type:b,namespace:e,key:t,value:a}}(t,a,n))},rejectUpdateValue(t,a,n,r){e(Z(t,a,n,r))}})))(zt));class qt extends r.Component{render(){return s.a.createElement("div",{className:ke.a.display},s.a.createElement(_e,{text:"Select a namespace and a key to edit."}))}}var Xt=Me(qt);var Qt=()=>s.a.createElement(E.a,{style:{zIndex:5}},s.a.createElement(_t.Toolbar,null));class Zt extends r.Component{render(){return s.a.createElement(E.a,{zDepth:0,className:ke.a.display},s.a.createElement(Qt,null),s.a.createElement(Xt,null))}}var $t=Zt,ea=a(669);const ta={borderBottom:"solid grey 1px"},aa={};class na extends r.Component{render(){const{list:e}=this.props;return aa.backgroundColor=h.palette.primary3Color,s.a.createElement("div",{className:ke.a.displayArea,style:aa},s.a.createElement(ea.Table,{fixedHeader:!0,headerStyle:ta},s.a.createElement(ea.TableHeader,{displaySelectAll:!1,adjustForCheckbox:!1},s.a.createElement(ea.TableRow,null,s.a.createElement(ea.TableHeaderColumn,null,"Namespace/Key"),s.a.createElement(ea.TableHeaderColumn,null,"Action"),s.a.createElement(ea.TableHeaderColumn,null,"Change"),s.a.createElement(ea.TableHeaderColumn,null,"Date Modified"),s.a.createElement(ea.TableHeaderColumn,null,"Modified By"))),s.a.createElement(ea.TableBody,{showRowHover:!0,displayRowCheckbox:!1},e.map(((e,t)=>s.a.createElement(ea.TableRow,{key:t},s.a.createElement(ea.TableRowColumn,null,e.name),s.a.createElement(ea.TableRowColumn,null,e.action),s.a.createElement(ea.TableRowColumn,null,"object"===typeof e.value?JSON.stringify(e.value):e.value),s.a.createElement(ea.TableRowColumn,null,e.date),s.a.createElement(ea.TableRowColumn,null,e.user)))))))}}var ra=Me(na);const sa={zIndex:5};class oa extends r.Component{render(){const{namespace:e,selectedKey:t}=this.props,a=t?"".concat(e,"/").concat(t):"".concat(e);return s.a.createElement(E.a,{style:sa},s.a.createElement(_t.Toolbar,null,s.a.createElement(Jt,{path:a})))}}var ca=oa;class la extends r.Component{componentDidMount(){const{getHistoryForKey:e,getHistoryForNamespace:t,params:{namespace:a,key:n}}=this.props;"undefined"!==typeof n?e(a,n):t(a)}componentDidUpdate(e){const{getHistoryForKey:t,getHistoryForNamespace:a,params:n}=this.props,{params:r}=e;n.key!==r.key&&"undefined"!==typeof n.key?t(n.namespace,n.key):(n.namespace!==r.namespace||"undefined"===typeof n.key&&"undefined"!==typeof r.key)&&a(n.namespace)}render(){const{history:e}=this.props,{namespace:t,key:a}=this.props.params;return s.a.createElement(E.a,{zDepth:0,className:ke.a.display},s.a.createElement(ca,{namespace:t,selectedKey:a}),s.a.createElement(ra,{list:e}))}}var ia=Object(l.b)((e=>({namespace:e.display.namespace,history:e.display.history})),(e=>({getHistoryForNamespace(t){e(le(t))},getHistoryForKey(t,a){e(ce(t,a))}})))(la),pa=a(679);class ua extends r.Component{constructor(...e){var t,a,n;super(...e),n=()=>{const{list:e}=this.props,t=[],a={},n=(new Date).toISOString().substring(0,10);e.map((e=>{const t=e.date.substring(0,10);if(t>n)return null;a[t]?a[t]++:a[t]=1})),a[n]||(a[n]=0);const r=Object.keys(a).sort();return r.map(((e,n)=>t[n]=a[e])),{labels:r,datasets:[{data:t,lineTension:0,fill:!1,backgroundColor:"rgb(25, 118, 210)",borderColor:"rgba(25,118,210,0.77)"}]}},(a="prepareData")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const e=this.prepareData(),{namespace:t}=this.props,a={title:{display:!0,text:"# of Edits in ".concat(t)},legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}],xAxes:[{type:"time",time:{unit:"day",round:"day"}}]}};return s.a.createElement(E.a,{className:ke.a.displayArea},s.a.createElement("div",{style:{width:"90%",margin:"0 auto 0 auto"}},s.a.createElement(pa.Line,{redraw:!0,data:e,options:a})))}}var da=Me(ua);var ma=({namespace:e})=>s.a.createElement(E.a,{style:{zIndex:5}},s.a.createElement(_t.Toolbar,null,s.a.createElement(Jt,{path:"".concat(e,"/statistics")})));class ha extends r.Component{componentDidMount(){const{getHistoryForKey:e,getHistoryForNamespace:t,params:{namespace:a,key:n}}=this.props;"undefined"!==typeof n?e(a,n):t(a)}componentDidUpdate(e){const{getHistoryForKey:t,getHistoryForNamespace:a,params:n}=this.props,{params:r}=e;n.key!==r.key?t(n.namespace,n.key):n.namespace!==r.namespace&&a(n.namespace)}render(){const{history:e,params:{namespace:t}}=this.props;return s.a.createElement(E.a,{zDepth:0,className:ke.a.display},s.a.createElement(ma,{namespace:t}),s.a.createElement(da,{list:e,namespace:t}))}}var ya=Object(l.b)((e=>({history:e.display.history})),(e=>({getHistoryForNamespace(t){e(le(t))},getHistoryForKey(t,a){e(ce(t,a))}})))(ha);class Ea extends r.Component{constructor(...e){var t,a,n;super(...e),n=()=>{const{namespace:e,keyValue:t}=this.props;this.props.deleteKeyInNamespace(e,t)},(a="handleConfirmed")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const{namespace:e,keyValue:t,namespaceStore:a}=this.props;let n=0;a&&a[e]&&(n=Object.keys(this.props.namespaceStore[e].keys).length);const r=s.a.createElement("p",null,"This will also delete the namespace ",e,".");return s.a.createElement(ge,{approveAction:this.handleConfirmed,approveLabel:"Delete",contentStyle:{maxWidth:"400px"}},s.a.createElement("p",null,"Are you sure you want to delete ","'".concat(t,"'")," in"," ",e,"?"),n<2?r:"")}}var ga=Object(l.b)((e=>({namespace:e.dialog.namespace,keyValue:e.dialog.key,namespaceStore:e.sidebar.namespaces})),(e=>({deleteKeyInNamespace(t,a){e(pe(t,a))}})))(Ea);class fa extends r.Component{constructor(...e){var t,a,n;super(...e),n=()=>{this.props.deleteNamespace(this.props.namespace)},(a="handleConfirmed")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){return s.a.createElement(ge,{approveAction:this.handleConfirmed,approveLabel:"Delete",contentStyle:{maxWidth:"400px"}},s.a.createElement("p",null,"Are you sure you want to delete"," ","'".concat(this.props.namespace,"'"),"?"),s.a.createElement("p",null,"This will delete ",s.a.createElement("u",null,"all")," keys in this namespace."))}}var ba=Object(l.b)((e=>({namespace:e.dialog.namespace})),(e=>({deleteNamespace(t){e(function(e){return(t,a)=>(t(function(e){return{type:"DELETE_NAMESPACE_PENDING",namespace:e}}(e)),W.deleteNamespace(e).then((n=>(t($(e)),a().display.namespace===e&&(t(q()),i.d.push("/")),n))).catch((a=>{console.log(a),t(function(e,t){return{type:"DELETE_NAMESPACE_REJECTED",namespace:e,error:void 0}}(e))})))}(t))}})))(fa);class va extends r.Component{render(){const e=this.props.component;return s.a.createElement(e,null)}}var Ca=va;class ka extends r.Component{constructor(...e){var t,a,n;super(...e),n=e=>e.props.name===this.props.dialogType,(a="matchDialog")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const e=this.props.children.find(this.matchDialog);if(!e)return null;const t=e.props.component;return s.a.createElement(t,null)}}var Na=Object(l.b)((e=>({dialogType:e.dialog.dialogType})))(ka);class xa extends r.Component{render(){return s.a.createElement(ge,{cancelAction:this.props.closeDialog,contentStyle:{maxWidth:"400px"}},this.props.message)}}var Ta=Object(l.b)((e=>({message:e.dialog.message})))(xa);function Oa(e){const t={valid:!1,message:"Required Field."};if(!e)return t;let a="";["#"].forEach((t=>{e.includes(t)&&(a=t)}));const n="You cannot use this character: ".concat(a," in namespaces or keys");return t.message=n,a?t:{valid:!0,message:""}}class Sa extends r.Component{constructor(e){super(e),this.state={keyValue:"",keyError:""},this.handleCreate=this.handleCreate.bind(this),this.keyRef=s.a.createRef()}componentDidMount(){setTimeout((()=>{this.keyRef.current.focus()}),1)}handleKeyInput(e){const t=e.target.value;this.setState({keyError:Oa(t).message,keyValue:t})}handleCreate(){const{keyValue:e}=this.state,{namespace:t}=this.props;return new Promise(((a,n)=>{const r=Oa(e);t&&r.valid?(this.props.createNamespace(t,e),a()):(this.setState({keyError:r.message}),n())}))}render(){return s.a.createElement(ge,{title:"New key for "+this.props.namespace,approveAction:this.handleCreate,contentStyle:{maxWidth:"500px"}},s.a.createElement(Dt.a,{hintText:"Key name",autoFocus:!0,ref:this.keyRef,errorText:this.state.keyError,style:{display:"block",width:"100%"},onChange:this.handleKeyInput.bind(this)}))}}var ja=Object(l.b)((e=>({namespace:e.dialog.namespace})),(e=>({createNamespace(t,a){e(oe(t,a))}})))(Sa);function _a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class wa extends r.Component{constructor(e){super(e),_a(this,"handleNamespaceInput",(e=>{const t=e.target.value;this.setState({namespaceError:Oa(t).message,namespaceValue:e.target.value})})),_a(this,"handleKeyInput",(e=>{const t=e.target.value;this.setState({keyError:Oa(t).message,keyValue:e.target.value})})),_a(this,"handleCreate",(()=>{const{namespaceValue:e,keyValue:t}=this.state;return new Promise(((a,n)=>{const r=Oa(e),s=Oa(t);s.valid&&r.valid?(this.props.createNamespace(e,t),a()):(this.setState({keyError:s.message,namespaceError:r.message}),n())}))})),this.state={namespaceValue:"",keyValue:"",namespaceError:"",keyError:""}}handleClose(){this.props.closeDialog()}render(){const e={display:"block",width:"100%"};return s.a.createElement(ge,{title:"New namespace",approveAction:this.handleCreate,cancelAction:this.props.closeDialog,contentStyle:{maxWidth:"500px"}},s.a.createElement(Dt.a,{autoFocus:!0,hintText:"Namespace",style:e,errorText:this.state.namespaceError,onChange:this.handleNamespaceInput}),s.a.createElement(Dt.a,{fullWidth:!0,hintText:"Key name",style:{fieldStyle:e},errorText:this.state.keyError,onChange:this.handleKeyInput}))}}var Da=Object(l.b)(null,(e=>({createNamespace(t,a){e(oe(t,a))}})))(wa),La=a(687),Aa=a.n(La),Ia=a(689),Va=a.n(Ia),Fa=a(377),Ka=a.n(Fa);function Ra(){return(Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Pa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ma={alignItems:"center",justifyContent:"center"};var Ha=(e,t)=>{class a extends r.Component{constructor(...e){super(...e),Pa(this,"renderLoading",(()=>s.a.createElement("div",{className:Ka.a.sidebarList,style:Ma},s.a.createElement(Ie,{size:"medium"})))),Pa(this,"renderError",(()=>s.a.createElement("div",{className:Ka.a.sidebarList,style:Ma},s.a.createElement(dt.a,{onClick:t},s.a.createElement(Va.a,null)),s.a.createElement("p",null,"Try again"))))}render(){const{loading:t,error:a,items:n}=this.props;return t||0===n.length?this.renderLoading():a?this.renderError():s.a.createElement(e,Ra({},this.props,this.state))}}return Object(l.b)((e=>({loading:e.sidebar.fetching,error:e.sidebar.error})))(a)},Ua=a(304),Ja=a(691),Ba=a.n(Ja),Ga=a(692),Ya=a.n(Ga),za=a(693),Wa=a.n(za),qa=a(378),Xa=a.n(qa),Qa=a(379),Za=a.n(Qa),$a=a(695),en=a.n($a);function tn(){return(tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class an extends r.Component{render(){return s.a.createElement(dt.a,tn({},this.props,{touch:!0,tooltipPosition:"bottom-left"}),s.a.createElement(en.a,{color:h.palette.accent3Color}))}}var nn=an;function rn(){return(rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const sn={vertical:"bottom",horizontal:"left"},on={vertical:"top",horizontal:"left"};class cn extends r.Component{deleteKey(e,t){this.props.deleteKeyInNamespace(e,t)}render(){const{namespace:e,keyName:t,deleteKeyInNamespace:a,...n}=this.props;return s.a.createElement(Xa.a,rn({disableAutoFocus:!0,anchorOrigin:sn,targetOrigin:on,iconButtonElement:s.a.createElement(nn,null)},n),s.a.createElement(ht.a,{leftIcon:s.a.createElement(Za.a,null),onClick:this.deleteKey.bind(this,e,t)},"Delete"))}}var ln=Object(l.b)(null,(e=>({deleteKeyInNamespace(t,a){e(ye(tt,{namespace:t,key:a}))}})))(cn);function pn(){return(pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const un={primaryText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:"18px"},selectedKey:{backgroundColor:"rgba(0, 0, 0, 0.2)"}};class dn extends r.Component{render(){const{index:e,namespace:t,keyName:a,router:n,params:r,routes:o,location:c,...l}=this.props,p=r.namespace===t&&r.key===a;return s.a.createElement(Ua.ListItem,pn({primaryText:s.a.createElement("div",{style:un.primaryText},a),key:e,rightIconButton:s.a.createElement(ln,{namespace:t,keyName:a}),leftIcon:s.a.createElement(Wa.a,null),onClick:()=>i.d.push("/edit/".concat(t,"/").concat(a)),style:p?un.selectedKey:{}},l))}}var mn=Object(i.e)(dn),hn=a(696),yn=a.n(hn);function En(){return(En=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const gn={vertical:"bottom",horizontal:"left"},fn={vertical:"top",horizontal:"left"};class bn extends r.Component{createKey(e){this.props.newKey(e)}deleteNamespace(e){this.props.deleteNamespace(e)}render(){const{name:e,deleteNamespace:t,newKey:a,...n}=this.props;return s.a.createElement(Xa.a,En({disableAutoFocus:!0,iconButtonElement:s.a.createElement(nn,null),anchorOrigin:gn,targetOrigin:fn},n),s.a.createElement(ht.a,{leftIcon:s.a.createElement(yn.a,null),onClick:this.createKey.bind(this,e)},"New key"),s.a.createElement(ht.a,{leftIcon:s.a.createElement(Za.a,null),onClick:this.deleteNamespace.bind(this,e)},"Delete"))}}var vn=Object(l.b)(null,(e=>({deleteNamespace(t){e(ye(et,{namespace:t}))},newKey(t){e(ye($e,{namespace:t}))}})))(bn);const Cn={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",height:"18px"};class kn extends r.Component{constructor(...e){var t,a,n;super(...e),n=(e,t)=>{e?this.props.closeNamespace(t):this.props.openNamespace(t)},(a="handleToggleNamespace")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const{search:e,namespace:{error:t,name:a,fetching:n,open:r}}=this.props;if(t)return s.a.createElement(Ua.ListItem,{primaryText:a,leftIcon:s.a.createElement(Ba.a,null)},s.a.createElement(xe.a,null));const o=Object.keys(this.props.namespace.keys).filter((t=>!e||t.toLowerCase().includes(e))).map((e=>s.a.createElement(mn,{namespace:a,keyName:e,key:e})));let c=s.a.createElement(Ie,null);return n||(c=r?s.a.createElement(Ya.a,null):s.a.createElement(Ba.a,null)),s.a.createElement(Ua.ListItem,{primaryText:s.a.createElement("div",{style:Cn},a),open:r,leftIcon:c,rightIconButton:s.a.createElement(vn,{name:a}),nestedItems:o,onClick:()=>this.handleToggleNamespace(r,a)})}}var Nn=Object(l.b)(null,(e=>({openNamespace(t){e(ae(t))},closeNamespace(t){e(te(t))}})))(kn);function xn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Tn={overflowY:"auto",overflowX:"hidden",height:"calc(100% - 72px)",paddingTop:0,margin:"8px 5px",backgroundColor:h.palette.primary3Color};class On extends r.Component{constructor(...e){super(...e),xn(this,"filterNamespaces",(e=>{const t=this.props.search.toLowerCase()||"";if(!t)return!0;let a=t.indexOf("#");a<0&&(a=t.length);const n=t.substring(0,a);return e.toLowerCase().includes(n)})),xn(this,"filterKeys",(()=>{const e=this.props.search.toLowerCase(),t=e.indexOf("#")+1,a=e.substring(t,e.length);return t>0?a:""}))}render(){const{items:e}=this.props;return s.a.createElement(Ua.List,{style:Tn},Object.keys(e).filter((e=>this.filterNamespaces(e))).sort().map((t=>s.a.createElement(Nn,{namespace:e[t],search:this.filterKeys(),key:t}))))}}var Sn=Object(l.b)((e=>({search:e.sidebar.searchValue})))(On);class jn extends r.Component{constructor(...e){var t,a,n;super(...e),n=e=>{"Enter"===e.key&&this.searchField.blur()},(a="handleKeys")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}render(){const{searchChanged:e,searchValue:t}=this.props;return s.a.createElement(Dt.a,{name:"searchbar",hintText:"Namespace#Key",floatingLabelStyle:{top:"25px"},style:{height:"auto"},inputStyle:{marginTop:"6px"},floatingLabelText:"Search",value:t,onChange:({target:{value:t}})=>e(t),onFocus:()=>e(""),onKeyUp:this.handleKeys,ref:e=>{this.searchField=e}})}}var _n=Object(l.b)((e=>({searchValue:e.sidebar.searchValue})),(e=>({searchChanged(t){e(function(e){return{type:k,searchValue:e}}(t))}})))(jn);class wn extends r.Component{render(){return s.a.createElement(E.a,{style:{zIndex:5}},s.a.createElement(_t.Toolbar,null,s.a.createElement(_n,null),s.a.createElement(_t.ToolbarGroup,{lastChild:!0},this.props.children)))}}var Dn=wn;class Ln extends r.Component{constructor(e){super(e),this.state={showDialog:!1,namespaceListImproved:Ha(Sn,e.getNamespaces)}}componentDidMount(){this.props.getNamespaces()}showDialog(){this.props.openNamespaceDialog()}render(){const{items:e}=this.props,t=this.state.namespaceListImproved;return s.a.createElement("div",{className:Ka.a.sidebar},s.a.createElement(Dn,null,s.a.createElement(Aa.a,{label:"New",onClick:this.showDialog.bind(this),primary:!0})),s.a.createElement(t,{items:e}))}}var An=Object(l.b)((e=>({items:e.sidebar.namespaces})),(e=>({openNamespaceDialog(){e(ye(Ze))},getNamespaces(){e(re())}})))(Ln),In=a(697),Vn=a.n(In);class Fn extends r.Component{render(){return s.a.createElement(Vn.a,{open:"string"===typeof this.props.message,message:s.a.createElement("span",null,this.props.message),autoHideDuration:5e3,onRequestClose:this.props.emptySnackbar})}}var Kn=Object(l.b)((e=>({message:e.snackbar.message})),(e=>({emptySnackbar(){e({type:N})}})))(Fn),Rn=a(701),Pn=a.n(Rn);class Mn extends r.Component{render(){return s.a.createElement("div",{className:Pn.a.wrapper},s.a.createElement("div",{className:Pn.a.layoutContainer},s.a.createElement("div",{className:Pn.a.pageContainer},s.a.createElement(An,null),this.props.children,s.a.createElement(Na,null,s.a.createElement(Ca,{name:$e,component:ja}),s.a.createElement(Ca,{name:Ze,component:Da}),s.a.createElement(Ca,{name:at,component:Ta}),s.a.createElement(Ca,{name:tt,component:ga}),s.a.createElement(Ca,{name:et,component:ba})))),s.a.createElement(Kn,null))}}var Hn=Mn;class Un extends r.Component{shouldComponentUpdate(){return!1}render(){const{store:e}=this.props;return s.a.createElement(c.a,{muiTheme:h},s.a.createElement(l.a,{store:e},s.a.createElement(i.c,{history:i.d},s.a.createElement(i.b,{path:"/",component:Hn},s.a.createElement(i.a,{component:$t}),s.a.createElement(i.b,{path:"edit/:namespace/:key",component:Wt}),s.a.createElement(i.b,{path:"history/:namespace",component:ia}),s.a.createElement(i.b,{path:"history/:namespace/:key",component:ia}),s.a.createElement(i.b,{path:"stats/:namespace",component:ya}),s.a.createElement(i.b,{path:"stats/:namespace/:key",component:ya})))))}}var Jn=Un,Bn=a(275),Gn=a(702);const Yn={dialogType:null},zn={...Yn};var Wn=(e=zn,t)=>{switch(t.type){case v:{const{dialogType:a,dialogprops:n}=t;return{...e,dialogType:a,...n}}case C:return{...e,...Yn};default:return e}};const qn={fetching:!1,fetched:!0,error:!1},Xn={fetching:!0,fetched:!1,error:!1},Qn={fetching:!1,fetched:!1,error:!0},Zn={history:[],fetching:!1,fetched:!1};var $n=(e=Zn,t)=>{switch(t.type){case Je:return{...e,jsonSearchValue:t.searchValue};case T:case H:case D:case"LOAD_VALUE":return{...e,...Xn};case O:case U:case L:return{...e,...Qn};case w:case x:return{...e,...qn};case M:{const{history:a,namespace:n,key:r}=t;return{...e,...qn,history:a,namespace:n,key:r}}case J:{const{history:a,namespace:n}=t;return{...e,...qn,namespace:n,history:a}}case B:return{...e,...Qn,namespace:t.namespace};case g:{const{namespace:a,key:n,value:r}=t;return{...e,...qn,namespace:a,key:n,value:r,editedValue:r}}case b:{const{namespace:a,key:n,value:r}=t;return{...e,...qn,namespace:a,key:n,editedValue:r}}case A:return{...e,...qn,value:t.value};default:return e}};const er={mode:"tree",undo:!1,redo:!1,jsonSearchValue:"",saving:!1};var tr=(e=er,t)=>{switch(t.type){case Je:return{...e,jsonSearchValue:t.searchValue};case Ge:return{...e,expand:!1,collapse:!0};case Be:return{...e,expand:!0,collapse:!1};case Xe:return{...e,compact:!0,format:!1};case qe:return{...e,compact:!1,format:!0};case Ye:return{...e,redo:!0};case ze:return{...e,undo:!0};case We:return{...e,mode:t.mode};case"VALUE_CHANGE":return{...e,undo:!1,redo:!1};case g:return{...e,...er};case w:{const{length:a}=t.value;return{...e,jsonLength:a}}case I:return{...e,saving:!0};case V:case A:return{...e,saving:!1};default:return{...e}}};const ar={ignoreNextConfirm:!1};var nr=(e=ar,t)=>{switch(t.type){case G:return{...e,ignoreNextConfirm:t.ignoreNextConfirm}}return e};const rr={fetching:!1,fetched:!0,error:!1},sr={fetching:!0,fetched:!1,error:!1},or={fetching:!1,fetched:!1,error:!0},cr={searchValue:"",history:[],fetching:!1,fetched:!1,namespaces:{}},lr=(e,t)=>{const a={};return e.filter((e=>"undefined"===typeof t[e])).forEach((e=>{a[e]={name:e,open:!1,keys:{}}})),a},ir=e=>{const t={};return e.forEach((e=>{t[e]={key:e}})),t};var pr=(e=cr,t)=>{switch(t.type){case k:return{...e,searchValue:t.searchValue};case f:{const{namespace:a}=t,n=t.override||!e.namespaces[a].open;return{...e,namespaces:{...e.namespaces,[a]:{...e.namespaces[a],open:n}}}}case x:return{...e,...rr,namespaces:{...e.namespaces,...lr(t.namespaces,e.namespaces)}};case T:return{...e,...sr};case O:return{...e,...or};case S:{const{namespace:a}=t;return{...e,namespaces:{...e.namespaces,[a]:{...e.namespaces[a],...rr,keys:ir(t.keys)}}}}case j:{const{namespace:a}=t;return{...e,namespaces:{...e.namespaces,[a]:{...e.namespaces[a],...sr}}}}case _:{const{namespace:a,error:n}=t;return{...e,namespaces:{...e.namespaces,[a]:{...e.namespaces[a],...or,errorMessage:n}}}}case w:case F:{const{namespace:a,key:n}=t,r=t.value.value,s={};return"undefined"!==typeof e.namespaces[a]?s[a]={...e.namespaces[a],keys:{...e.namespaces[a].keys,[n]:{key:n,value:r}}}:s[a]={name:a,open:!1,keys:{[n]:{key:n,value:{}}}},{...e,...rr,namespaces:{...e.namespaces,...s}}}case g:{const{namespace:a,key:n,value:r}=t;return{...e,namespace:a,key:n,value:r}}case P:{const a=e.namespaces;return delete a[t.namespace],{...e,namespaces:{...a}}}case R:{const{namespace:a,key:n}=t,r=e.namespaces[a];return delete r.keys[n],{...e,namespaces:{...e.namespaces,[r.name]:r}}}default:return{...e}}};const ur={snackbarMessage:{message:""}},dr={};var mr=(e=dr,t)=>{switch(t.type){case g:return{...ur};case A:return{...e,message:"Value saved."};case V:{let a="Failed to save.";const{error:n}=t;return n&&"string"===typeof n&&(a=t.error),{...e,message:a}}case U:return{...e,message:"Failed to get history."};case _:return{...e,message:t.error};case R:return{...e,message:"Key deleted."};case P:return{...e,message:"Namespace deleted."};case K:{let a="Failed to create. ";return t.error&&t.error.message&&(a+=t.error.message),{...e,message:a}}case N:return{...ur};default:return{...e}}},hr=Object(Bn.c)({display:$n,sidebar:pr,snackbar:mr,dialog:Wn,jsonEditor:tr,navigation:nr}),yr=Object(Bn.d)(hr,Object(Bn.a)(Gn.a)),Er=a(6),gr=a.n(Er),fr=a(703);gr.a.addResources("en","default",fr);gr.a;t.default=()=>{const{d2:e}=Object(n.a)();return e?s.a.createElement(Jn,{store:yr}):null}}}]);
//# sourceMappingURL=app.b7e701e3.chunk.js.map